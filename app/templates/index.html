<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IP Status</title>
    <link rel="icon" href="data:,">
    <script>
        // Fun√ß√£o para detectar o caminho base dos est√°ticos
        function getStaticPath() {
            const path = window.location.pathname;
            return path.includes('/ipmonitor/') ? '/ipmonitor/static/' : '/static/';
        }
        
        // Carregar CSS dinamicamente
        function loadCSS(filename) {
            const link = document.createElement('link');
            link.rel = 'stylesheet';
            link.href = getStaticPath() + filename;
            document.head.appendChild(link);
        }
        
        // Carregar CSS principal
        loadCSS('styles.css');
    </script>
    <script>
        function getBasePath() {
            const path = window.location.pathname;
            return path.includes('/ipmonitor/') ? '/ipmonitor/' : '/';
        }
        function navigateTo(page) {
            const basePath = getBasePath();
            if (page === 'home') {
                window.location.href = basePath;
            } else {
                window.location.href = basePath + page;
            }
        }
    </script>
</head>
<body>

    <nav>
        <!-- Controles principais -->
        <div id="nav-controls">
            <button id="botaoInicio" class="active" onclick="navigateTo('home')">üè† P√°gina Inicial</button>
            <button id="botaoDispositivos" onclick="navigateTo('dispositivos')">üíª Dispositivos</button>
            <button id="botaoConfiguracoes" onclick="navigateTo('configuracoes')">‚öôÔ∏è Configura√ß√µes</button>
            
            <div id="filtroVLAN-container">
                <label for="filtroVLAN">Selecione a VLAN: </label>
                <select id="filtroVLAN" onchange="searchByVlan()">
                    <!-- VLANs Principais do Sistema -->
                    <option value="80">VLAN 80 - Alarme</option>
                    <option value="85">VLAN 85 - Automa√ß√£o Ethernet</option>
                    <option value="86">VLAN 86 - Automa√ß√£o WiFi</option>
                    <!-- Outras VLANs -->
                    <option value="70">VLAN 70 - C√¢meras</option>
                    <option value="200">VLAN 200 - Telefonia IP Fixa</option>
                    <option value="204">VLAN 204 - Telefonia IP M√≥vel</option>
                </select>
            </div>
        </div>    <!-- Informa√ß√µes de Rede -->
    <div id="network-info">
        <span class="network-info-item" title="M√°scara de sub-rede padr√£o para todas as VLANs">
            <strong>M√°scara:</strong> 255.255.255.0
        </span>
        <span class="network-info-item gateway-info" title="Gateway calculado automaticamente baseado na VLAN selecionada (172.17.[VLAN].254)">
            <strong>Gateway:</strong> <span id="gateway-value">172.17.85.254</span>
        </span>
    </div>

    </nav>

    <!-- Informa√ß√µes sobre VLANs -->
    <div id="vlan-info-section">
        <div class="vlan-info-card" id="vlan-80-info" style="display: none;">
            <h4>üö® VLAN 80 - Sistema de Alarme</h4>
            <p>Rede dedicada aos dispositivos do sistema de alarme e seguran√ßa do edif√≠cio.</p>
            <div class="vlan-details">
                <span class="vlan-detail">M√°scara: 255.255.255.0</span>
                <span class="vlan-detail">Gateway: 172.17.80.254</span>
            </div>
        </div>
        <div class="vlan-info-card" id="vlan-85-info" style="display: block;">
            <h4>üîå VLAN 85 - Automa√ß√£o Ethernet</h4>
            <p>Rede para dispositivos de automa√ß√£o predial conectados via cabo Ethernet.</p>
            <div class="vlan-details">
                <span class="vlan-detail">M√°scara: 255.255.255.0</span>
                <span class="vlan-detail">Gateway: 172.17.85.254</span>
            </div>
        </div>
        <div class="vlan-info-card" id="vlan-86-info" style="display: none;">
            <h4>üì∂ VLAN 86 - Automa√ß√£o WiFi</h4>
            <p>Rede para dispositivos de automa√ß√£o e sensores conectados via WiFi.</p>
            <div class="vlan-details">
                <span class="vlan-detail">M√°scara: 255.255.255.0</span>
                <span class="vlan-detail">Gateway: 172.17.86.254</span>
            </div>
        </div>
        <div class="vlan-info-card" id="vlan-70-info" style="display: none;">
            <h4>üìπ VLAN 70 - Sistema de C√¢meras</h4>
            <p>Rede dedicada ao sistema de monitoramento por c√¢meras de seguran√ßa.</p>
            <div class="vlan-details">
                <span class="vlan-detail">M√°scara: 255.255.255.0</span>
                <span class="vlan-detail">Gateway: 172.17.70.254</span>
            </div>
        </div>
        <div class="vlan-info-card" id="vlan-200-info" style="display: none;">
            <h4>‚òéÔ∏è VLAN 200 - Telefonia IP Fixa</h4>
            <p>Rede para sistema de telefonia IP com aparelhos fixos.</p>
            <div class="vlan-details">
                <span class="vlan-detail">M√°scara: 255.255.255.0</span>
                <span class="vlan-detail">Gateway: 172.17.200.254</span>
            </div>
        </div>
        <div class="vlan-info-card" id="vlan-204-info" style="display: none;">
            <h4>üì± VLAN 204 - Telefonia IP M√≥vel</h4>
            <p>Rede para sistema de telefonia IP com dispositivos m√≥veis e softphones.</p>
            <div class="vlan-details">
                <span class="vlan-detail">M√°scara: 255.255.255.0</span>
                <span class="vlan-detail">Gateway: 172.17.204.254</span>
            </div>
        </div>
    </div>

    <!-- Container de visualiza√ß√£o em Grid/Cards -->
    <div id="devices-container" class="devices-grid">
        <!-- Cards ser√£o inseridos aqui dinamicamente -->
    </div>
    
    <!-- Mensagem Preliminar sem Script -->
    <div id="mensagem_preliminar" >Aguardando obten√ß√£o de dados...</div>

    <!-- Tabela antiga (mantida oculta como fallback) -->
    <table id='main_table' style="display: none;">
        <thead>
            <tr>
                <th class="descricao_A">Descri√ß√£o</th>
                <th class="tipo_A">Tipo</th>
                <th class="IP_A">IP</th>
                <th class="status_A">Status</th>
                <th class="descricao_B">Descri√ß√£o</th>
                <th class="tipo_B">Tipo</th>
                <th class="IP_B">IP</th>
                <th class="status_B">Status</th>
                <th class="descricao_C">Descri√ß√£o</th>
                <th class="tipo_C">Tipo</th>
                <th class="IP_C">IP</th>
                <th class="status_C">Status</th>
                <th class="descricao_D">Descri√ß√£o</th>
                <th class="tipo_D">Tipo</th>
                <th class="IP_D">IP</th>
                <th class="status_D">Status</th>
            </tr>
        </thead>
        <tbody id="ipTableBody">
            <!-- Itens da tabela -->
        </tbody>
    </table>
    
    <!-- Mensagem Preliminar sem Script -->
    <div id="mensagem_preliminar" >Aguardando obten√ß√£o de dados...</div>

    <!-- Modal de Edi√ß√£o de Dispositivo -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>‚úèÔ∏è Editar Dispositivo</h2>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="edit-ip">üåê IP:</label>
                    <input type="text" id="edit-ip" readonly>
                </div>
                <div class="form-group">
                    <label for="edit-descricao">üìù Descri√ß√£o:</label>
                    <input type="text" id="edit-descricao" placeholder="Digite a descri√ß√£o do dispositivo">
                </div>
                <div class="form-group">
                    <label for="edit-tipo">üè∑Ô∏è Tipo:</label>
                    <input type="text" id="edit-tipo" list="device-types" placeholder="Digite ou selecione o tipo">
                    <datalist id="device-types">
                        <!-- Ser√° preenchido dinamicamente -->
                    </datalist>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-cancel" onclick="closeEditModal()">‚ùå Cancelar</button>
                <button class="btn-save" onclick="saveDevice()">üíæ Salvar</button>
            </div>
        </div>
    </div>

    <!-- Script -->
    <script>
        // Carregar JavaScript dinamicamente
        const scriptSrc = getStaticPath() + 'index.js';
        const script = document.createElement('script');
        script.src = scriptSrc;
        document.head.appendChild(script);
    </script>

    <footer>
        <div class="footer-content">
          <p>@Sistema WEB desenvolvido por Wilson do Serv. Infraestrutura Predial.</p>
        </div>
  
      </footer> 
</body>
</html>
